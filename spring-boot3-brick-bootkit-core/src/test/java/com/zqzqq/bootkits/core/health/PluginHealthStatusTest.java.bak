package com.zqzqq.bootkits.core.health;

import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;

import static org.assertj.core.api.Assertions.assertThat;

/**
 * 插件健康状态枚举测试
 */
@DisplayName("PluginHealthStatus Test")
class PluginHealthStatusTest {

    @Test
    @DisplayName("测试所有健康状态枚举值")
    void testAllHealthStatusValues() {
        // 测试所有状态
        assertThat(PluginHealthStatus.values()).containsExactly(
            PluginHealthStatus.HEALTHY,
            PluginHealthStatus.WARNING,
            PluginHealthStatus.CRITICAL,
            PluginHealthStatus.UNKNOWN,
            PluginHealthStatus.STARTING,
            PluginHealthStatus.STOPPING
        );
    }

    @Test
    @DisplayName("测试从字符串创建健康状态")
    void testFromString() {
        assertThat(PluginHealthStatus.valueOf("HEALTHY")).isEqualTo(PluginHealthStatus.HEALTHY);
        assertThat(PluginHealthStatus.valueOf("WARNING")).isEqualTo(PluginHealthStatus.WARNING);
        assertThat(PluginHealthStatus.valueOf("CRITICAL")).isEqualTo(PluginHealthStatus.CRITICAL);
        assertThat(PluginHealthStatus.valueOf("UNKNOWN")).isEqualTo(PluginHealthStatus.UNKNOWN);
        assertThat(PluginHealthStatus.valueOf("STARTING")).isEqualTo(PluginHealthStatus.STARTING);
        assertThat(PluginHealthStatus.valueOf("STOPPING")).isEqualTo(PluginHealthStatus.STOPPING);
    }

    @Test
    @DisplayName("测试健康状态的排序")
    void testHealthStatusPriority() {
        // HEALTYYY 应该比 WARNING 优先权更高
        assertThat(PluginHealthStatus.HEALTHY.ordinal()).isLessThan(PluginHealthStatus.WARNING.ordinal());
        assertThat(PluginHealthStatus.WARNING.ordinal()).isLessThan(PluginHealthStatus.CRITICAL.ordinal());
        assertThat(PluginHealthStatus.CRITICAL.ordinal()).isLessThan(PluginHealthStatus.UNKNOWN.ordinal());
        assertThat(PluginHealthStatus.UNKNOWN.ordinal()).isLessThan(PluginHealthStatus.STARTING.ordinal());
        assertThat(PluginHealthStatus.STARTING.ordinal()).isLessThan(PluginHealthStatus.STOPPING.ordinal());
    }

    @Test
    @DisplayName("测试健康状态的字符串表示")
    void testHealthStatusToString() {
        assertThat(PluginHealthStatus.HEALTHY.name()).isEqualTo("HEALTHY");
        assertThat(PluginHealthStatus.WARNING.name()).isEqualTo("WARNING");
        assertThat(PluginHealthStatus.CRITICAL.name()).isEqualTo("CRITICAL");
        assertThat(PluginHealthStatus.UNKNOWN.name()).isEqualTo("UNKNOWN");
        assertThat(PluginHealthStatus.STARTING.name()).isEqualTo("STARTING");
        assertThat(PluginHealthStatus.STOPPING.name()).isEqualTo("STOPPING");
    }
}